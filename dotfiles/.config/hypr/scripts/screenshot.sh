#!/bin/bash

# المسار المؤقت لحفظ اللقطة قبل فتحها في swappy
TEMP_SHOT="/tmp/screenshot.png"

# 1. التقاط المنطقة المحددة باستخدام grim و slurp
# grim -g "$(slurp)" يقوم بالتقاط المنطقة التي تختارها بمؤشر الماوس
# ثم يتم حفظها في المسار المؤقت
grim -g "$(slurp)" "$TEMP_SHOT"

# تحقق مما إذا تم التقاط الصورة بنجاح (إذا ضغطت Esc، لن يتم إنشاء الملف)
if [ -f "$TEMP_SHOT" ]; then
    # 2. فتح الصورة الملتقطة في swappy لخيارات التعديل
    # swappy يتيح لك الرسم والبلور والحفظ والنسخ
    swappy -f "$TEMP_SHOT"

    # يمكنك إضافة خيار لنسخ الصورة إلى الحافظة تلقائياً بعد الالتقاط (اختياري)
    # wl-copy < "$TEMP_SHOT" 
fi
